{
  "widgetsBundle": {
    "alias": "intel_manageability6",
    "title": "Intel Manageability Widgets NEW 3.X version",
    "image": null,
    "description": null
  },
  "widgetTypes": [
    {
      "alias": "connectivity_status",
      "name": "Connectivity Status",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "rpc",
        "sizeX": 6,
        "sizeY": 1.5,
        "resources": [],
        "templateHtml": "<!--\nConnectivity Status widget HTML\n\nCopyright (C) 2017-2023 Intel Corporation\nSPDX-License-Identifier: Apache-2.0\n-->\n\n<!DOCTYPE HTML>\n\n<!--OTA Card-->\n<fieldset id=\"status-panel\"\n    [disabled]=\"!rpcEnabled || executingRpcRequest\"\n    style=\"height: 100%;\">\n    <mat-progress-circular\n        *ngIf=\"executingRpcRequest\"\n        mat-diameter=\"20px\"\n        style=\"position: absolute;\n            right: 1rem;\n            top: calc(50% - 10px);\">\n    </mat-progress-circular>\n    <div class=\"status\" [ngClass]=\"connection\"\n        (click)=\"ping()\">\n        <span class=\"text\">\n            Status:\n            {{ connection  ? \"Online\" : \"Offline\" }}\n        </span>\n    </div>\n</fieldset>",
        "templateCss": "/*\nConnectivity Status widget CSS\n\nCopyright (C) 2017-2023 Intel Corporation\nSPDX-License-Identifier: Apache-2.0\n*/\n\n.status {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    background-color: gray;\n    color: white;\n}\n\n.alive {\n    background-color: green;\n}\n\n.text {\n    display: inline-block;\n    margin: 1rem;\n    height: 1rem;\n    font-size: 1rem;\n    font-weight: bold;\n}\n\nmat-progress-circular svg path {\n    stroke: white;\n}",
        "controllerScript": "/*\nConnectivity Status widget Angular controller code\n\nCopyright (C) 2017-2023 Intel Corporation\nSPDX-License-Identifier: Apache-2.0\n*/\n\nself.onInit = function() {\n\n    const scope = self.ctx.$scope;\n    const settings = self.ctx.settings;\n\n    // Initialization\n    scope.connection = \"\";\n    scope.pulse = 60000 * settings.pulse;\n\n    // Callback to send the fields and inputs to device\n    scope.ping = () => {\n          \n        var commandObservable=  self.ctx.controlApi.sendTwoWayCommand(\"ping\", {}, 500);\n        \n        commandObservable.subscribe(\n            function (response) {\n                self.ctx.detectChanges();\n                scope.connection = \"alive\";\n                self.ctx.detectChanges();\n                \n            },\n            function (rejection) {\n                self.ctx.detectChanges();\n                scope.connection = \"\";\n                self.ctx.detectChanges();\n            }\n            \n        );\n    \n        return commandObservable;\n\n    };\n    \n    // Defer the check in ping to avoid spam\n    scope.deferred_ping = 0;\n    scope.defer_ping = () => {\n        clearTimeout(scope.deferred_ping);\n        scope.deferred_ping = setTimeout(scope.ping, 5000);\n    };\n\n    // Recursive pulse ping\n    scope.pulse_ping = () => setTimeout(() => {\n        scope.defer_ping();\n        scope.pulse_ping();\n    }, scope.pulse);\n\n    // Listen to the globally broadcasted connectivity event\n    document.addEventListener(\"deviceActive\", scope\n        .defer_ping);\n    \n    scope.sendRpc = rpcEvent => {\n        if (rpcEvent.detail !== null) {\n            command = rpcEvent.detail.command;\n            payload = rpcEvent.detail.payload;\n            var c = self.ctx.controlApi\n                .sendTwoWayCommand(command, payload, 500);\n                \n            c.subscribe(\n                    function (response) {\n                        document.dispatchEvent(\n                            new CustomEvent(\n                                'rpcAck', { detail: true }\n                            )\n                        )\n                    },\n                    function (rejection) { \n                        document.dispatchEvent(\n                            new CustomEvent(\n                                'rpcAck', { detail: false }\n                            )\n                        )\n                    }\n            )\n                    \n        }\n    };\n    \n        \n    // Listen for globally broadcasted RPC request events\n    document.addEventListener(\"rpcRequest\", scope.sendRpc);\n\n    scope.ping();\n    scope.pulse_ping();\n};\n\nself.onDestroy = function() {\n    document.removeEventListener(\"deviceActive\",\n        self.ctx.$scope.ping);\n};",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"pulse\": {\n                \"title\": \"Pulse (minutes)\",\n                \"type\": \"number\",\n                \"default\": 5\n            }\n        }\n    }\n}",
        "dataKeySettingsSchema": "{}",
        "defaultConfig": "{\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"pulse\":10},\"title\":\"Connectivity Status\",\"dropShadow\":true,\"enableFullscreen\":false,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"mobileHeight\":null,\"targetDeviceAliases\":[],\"widgetStyle\":{},\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"showLegend\":false,\"actions\":{}}"
      }
    },
    {
      "alias": "device_list",
      "name": "Device List",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "latest",
        "sizeX": 6.5,
        "sizeY": 4.5,
        "resources": [],
        "templateHtml": "<!--\r\nDevice List widget HTML\r\n\r\n@copyright: Copyright 2021 Intel Corporation All Rights Reserved.\r\n@license: Intel, see licenses/LICENSE for more details.\r\n-->\r\n\r\n<!DOCTYPE HTML>\r\n\r\n<div id=\"info-panel\" style=\"height: 100%;\">\r\n    <div class=\"header-box\">\r\n        <div class=\"header\">Intel Manageability Devices</div>\r\n        <div class=\"search-box\">\r\n            <mat-input-container mat-no-float class=\"search\">\r\n                  <mat-icon mat-font-library=\"material-icons\">\r\n                      search\r\n                  </mat-icon>\r\n                  <input (ngModel)=\"search.name\"\r\n                         type=\"text\"\r\n                         placeholder=\"Search\">\r\n            </mat-input-container>\r\n            <button mat-button class=\"mat-icon-button\" [matMenuTriggerFor]=\"menu\">\r\n                    <mat-icon mat-menu-origin mat-font-library=\"material-icons\">\r\n                        more_vert\r\n                    </mat-icon>\r\n            </button>\r\n            <mat-menu  #menu=\"matMenu\" class=\"search-options\">\r\n                <mat-menu-content width=\"2\">\r\n                        <button mat-menu-item (click)=\"batchSelect(true)\">\r\n                            Select All\r\n                        </button>\r\n                        <button mat-menu-item  (click)=\"batchSelect(false)\">\r\n                            Select None\r\n                        </button>\r\n                </mat-menu-content>\r\n            </mat-menu>\r\n        </div>\r\n    </div>\r\n    <div class=\"devices\">\r\n        <div class=\"device\" *ngFor=\"let d of devices\">\r\n            <mat-checkbox \r\n            [checked]=\"d.checked\"\r\n            (change)=\"valueChange($event, d)\">\r\n            {{d.name}}\r\n            </mat-checkbox>\r\n        </div>\r\n    </div>\r\n</div>",
        "templateCss": "/*\nDevice List widget CSS\n\n@copyright: Copyright 2021 Intel Corporation All Rights Reserved.\n@license: Intel, see licenses/LICENSE for more details.\n*/\n\n\n#info-panel {\n    overflow: auto;\n    margin: 0;\n}\n\n.header-box {\n    top: 0;\n    z-index: 10;\n    box-sizing: border-box;\n\n    position: -webkit-sticky;\n    position: sticky;\n    padding: 1.5rem 1.5rem 0.5rem 1.5rem;\n    background-color: #fff;\n    margin-bottom: 1.5rem;\n    \n    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.2);\n}\n\n.header {\n    font-size: 1.25rem;\n    font-weight: 500;\n}\n\n.mat-errors-spacer {\n    display: none;\n}\n\n.search-box {\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n}\n\n.search {\n    flex-basis: 1;\n    flex-grow: 1;\n}\n\n.device {\n    margin: 0 1.5rem 0.5rem 1.5rem;\n    display: flex;\n    flex-flow: column nowrap;\n}",
        "controllerScript": "/*\nDevice List widget Angular controller code\n\n@copyright: Copyright 2021 Intel Corporation All Rights Reserved.\n@license: Intel, see licenses/LICENSE for more details.\n*/\n\n\nself.onInit = function() {\n    const scope = self.ctx.$scope;\n        scope.online = false;\n\n    // Initialize the devices object\n    scope.devices = [];\n    self.ctx.datasources.forEach(source => {\n        // Create the devices\n        device = {\n            selected: true,\n            name: source.name,\n            id: source.entityId\n        };\n        scope.devices.push(device);\n    });\n    scope.devices.sort((a, b) => {\n        // Sort the devices by name alphabetically\n        const an = a.name;\n        const bn = b.name;\n        return an < bn ? -1 : an > bn ? 1 : 0;\n    });\n    \n    // Initialize the search object\n    scope.search = {\n        name: \"\"\n    };\n    \n    // Batch alter the select state\n    scope.batchSelect = state => {\n        for (let name in scope.devices) {\n            const device = scope.devices[name];\n            device.checked = state;\n            scope.selected();\n        }\n    };\n    \n    // Broadcast an event with the selected events\n    scope.selected = () => {\n        const selectedIds = [];\n        scope.devices.forEach(device => {\n            if (device.checked) {\n                console.log(\"device checked \" + device.name);\n                selectedIds.push({\n                    id: device.id,\n                    name: device.name\n                });   \n            }\n        });\n        const deviceSelected = new CustomEvent(\n            'deviceSelected',\n            {detail: selectedIds}\n        );\n        console.log('dispatching device event');\n        document.dispatchEvent(deviceSelected);\n    };\n    \n    scope.valueChange = (event, d) => {\n        console.log(\"valueChange on checkbox\");\n        d.checked = event.checked;\n        scope.selected();\n    }\n};\n\nself.onDataUpdated = function() {\n    // const scope = self.ctx.$scope;\n    // scope.selected();\n};\n\nself.onResize = function() {};\n\nself.onDestroy = function() {};\n",
        "settingsSchema": "{}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"My Device\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Happiness\",\"color\":\"#ff9800\",\"settings\":{},\"_hash\":0.26790778871949805,\"funcBody\":\"return Math.round(1000*Math.cos(time/5000));\"},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Temperature\",\"color\":\"rgb(33, 150, 243)\",\"settings\":{},\"_hash\":0.682878536509057,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{},\"title\":\"Device List\",\"dropShadow\":true,\"enableFullscreen\":false,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"showLegend\":false,\"actions\":{}}"
      }
    },
    {
      "alias": "docker_stats_widget_copy",
      "name": "Docker-stats widgets",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "latest",
        "sizeX": 8,
        "sizeY": 5,
        "resources": [],
        "templateHtml": "<!--\nDocker Container Stats widget HTML\n\n@copyright: Copyright 2019-2023 Intel Corporation All Rights Reserved.\n@license: Intel, see licenses/LICENSE for more details.\n-->\n\n\n\n<!DOCTYPE HTML>\n\n<div id=\"info-panel\" style=\"height: 100%;\">\n    <div class=\"stats\">\n        <div class=\"header-box\">\n            <div class=\"header-title\">\n                <span class=\"header-label\">\n                    Docker Container Stats\n                </span>\n            </div>\n             <div class=\"header-info\">\n                Last updated: {{lastUpdated}}\n            </div>\n        </div>\n        <div class=\"no-data\" *ngIf='containers?.length == 0'>NO DOCKER STATS DATA</div>\n        <div class=\"container\" \n                [ngClass]=\"{ 'container-active': c }\" \n                *ngFor=\" let c of containers\">\n            <div class=\"container-name\">\n            </div>\n            <div class=\"container-stats\">\n                   <div>\n                       <div class=\"stat\" style=\"margin-right:5px\" *ngFor=\"let item of c | keyvalue\">\n                        {{item.key}}: {{item.value}}\n                       </div>\n                   </div>\n            </div>\n        </div>\n    </div>\n</div>",
        "templateCss": "/*\nDocker Container Stats widget CSS\n\n@copyright: Copyright 2019-2023 Intel Corporation All Rights Reserved.\n@license: Intel, see licenses/LICENSE for more details.\n*/\n\n#info-panel {\n    overflow: auto;\n    margin: 0;\n}\n\n.stats {\n    margin: 0;\n    display: flex;\n    flex-flow: column nowrap;\n}\n\n.header-box {\n    top: 0;\n    z-index: 10;\n    box-sizing: border-box;\n\n    position: -webkit-sticky;\n    position: sticky;\n    padding: 1rem;\n    background-color: #fff;\n    margin-bottom: 1.5rem;\n    \n    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.2);\n}\n\n.header-title {\n    display: flex;\n    flex-flow: row wrap;\n    align-items: center;\n    font-size: 1.05rem;\n    margin-bottom: 0.5rem;\n}\n\n.header-info {\n    font-size: 0.9rem;\n    color: #777;\n}\n\n.mat-errors-spacer {\n    display: none;\n}\n\n.search-box {\n    display: inline-block;\n    flex-flow: row nowrap;\n    align-items: center;\n    margin: 0;\n}\n\n.search {\n    flex-basis: 1;\n    flex-grow: 1;\n}\n\nmat-progress-circular svg path {\n    stroke: #777;\n}\n\n.no-data {\n    margin: 0 auto;\n}\n\n.container {\n    opacity: 0.5;\n    box-sizing: border-box;\n    width: 100%;\n    margin-bottom: 1rem;\n    padding: 0rem 1rem;\n    font-size: 0.9rem;\n}\n\n.container-name {\n    margin-right: 0.5rem;\n    word-wrap: break-word;\n    font-weight: bold;\n}\n\n.container-stats {\n    display: flex;\n    flex-flow: row wrap;\n    word-wrap: break-word;\n    word-break: break-all;\n    color: #666;\n}\n\n.container-active {\n    opacity: 1;\n}\n\n.stat {\n    margin-bottom: 0.25rem;\n}",
        "controllerScript": "/*\nDocker Container Stats widget Angular controller code\n\n@copyright: Copyright 2022 Intel Corporation All Rights Reserved.\n@license: Intel, see licenses/LICENSE for more details.\n*/\n\nself.onInit = function() {\n\n    const scope = self.ctx.$scope;\n    \n    scope.containers = [];\n    scope.waiting = false;\n};\n\n/*\nRound a number with a given precision.\n\n@param value: the value to round.\n@param precision: the number of places to round 'value' to.\n@return: the rounded value.\n*/\nfunction round(value, precision) {\n    var mult = Math.pow(10, precision || 0);\n    return Math.round(value * mult) / mult;\n}\n\n/*\nConvert a given number of bytes to a easily readable \ndenomination if needed (KB, MB, GB).\n\n@param val: an integer representing a certain number of bytes\n@return: a string that contains the easily readable conversion of the integer.\n*/\nfunction toMegabytes(val) {\n    const NUM_BYTES_IN_KB = 1e3;\n    const NUM_BYTES_IN_MB = 1e6;\n    const NUM_BYTES_IN_GB = 1e9;\n    const PRECISION = 2;\n\n    if (val < 0) {\n        return \"is negative!\";\n\n    } if (val / NUM_BYTES_IN_KB == 0 \n          || val.toString().length < NUM_BYTES_IN_KB.toString().length) { // bytes\n        return val.toString().concat(\" Bytes\");\n\n    } else if (val.toString().length < NUM_BYTES_IN_MB.toString().length) { // kilobytes\n        return round(val / NUM_BYTES_IN_KB, PRECISION).toString().concat(\" KB\");\n        \n    } else if (val.toString().length < NUM_BYTES_IN_GB.toString().length) { // megabytes\n        return round(val / NUM_BYTES_IN_MB, PRECISION).toString().concat(\" MB\");\n        \n    } else { // gigabytes\n        return round(val / NUM_BYTES_IN_GB, PRECISION).toString().concat(\" GB\");\n    }\n}\n\n\nself.onDataUpdated = function() {\n\n    const scope = self.ctx.$scope;\n    self.ctx.detectChanges();\n    let maxTS = 0;\n    scope.containers = [];\n    self.ctx.data.forEach(data => {\n        // Timestamp is left, prop is right\n        if (data.data.length === 0) return;\n        let ts = data.data[0][0];\n        let value = data.data[0][1];\n        console.log(data);\n\n        // Try to parse container stats\n        let containers_data = null;\n        try {\n            containers_data = JSON.parse(value);\n        } catch (e) {\n            return;\n        } finally {\n            if (containers_data === null\n                || !containers_data.hasOwnProperty(\"containers\")) {\n                    return;\n                }\n        }\n        \n        // Create container objects\n        const containers = [];\n        containers_data.containers.forEach(c => {\n            container = {\n                ContainerName: c.imageName,\n                Date: new Date(ts),\n                ContainerID: c.containerID,\n                CpuPercent: c.cpuPercent,\n                MemoryUsage: toMegabytes(c.memoryUsage),\n                MemoryLimit: toMegabytes(c.memoryLimit),\n                MemoryPercent: c.MemoryPercent\n            };\n            containers.push(container);\n        });\n\n        scope.containers = scope.containers.concat(containers);\n        if (ts > maxTS) {\n            maxTS = ts;\n        }\n    });\n    \n    if (maxTS > 0) {\n        const lastUpdatedTS = new Date(0);\n        lastUpdatedTS.setUTCMilliseconds(maxTS);\n        scope.lastUpdated = lastUpdatedTS.toLocaleString();\n        setTimeout(() => scope.waiting = false, 10);\n    }\n};\n\nself.onResize = function() {};\n\nself.onDestroy = function() {};\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"refreshTimeout\": {\n                \"title\": \"Refresh Timeout\",\n                \"type\": \"number\",\n                \"default\": 8000\n            }\n        }\n    }\n}",
        "dataKeySettingsSchema": "{}",
        "defaultConfig": "{\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{},\"title\":\"Docker-stats widgets\",\"dropShadow\":true,\"enableFullscreen\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"mobileHeight\":null,\"showTitleIcon\":false,\"titleIcon\":\"more_horiz\",\"iconColor\":\"rgba(0, 0, 0, 0.87)\",\"iconSize\":\"24px\",\"titleTooltip\":\"\",\"widgetStyle\":{},\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"showLegend\":false,\"actions\":{},\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.7570621101814305,\"funcBody\":\"return Math.round(1000*Math.sin(time/5000));\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}}}"
      }
    },
    {
      "alias": "attributes_card",
      "name": "Device Information",
      "image": "data:image/png;base64,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",
      "description": "Displays one or more latest values of the entity. Supports multiple entities.",
      "descriptor": {
        "type": "latest",
        "sizeX": 7.5,
        "sizeY": 3,
        "resources": [],
        "templateHtml": "",
        "templateCss": "#container {\n    overflow: auto;\n}\n\n.tbDatasource-container {\n    margin: 5px;\n    padding: 8px;\n}\n\n.tbDatasource-title {\n    font-size: 1.200rem;\n    font-weight: 500;\n    padding-bottom: 10px;\n}\n\n.tbDatasource-table {\n    width: 100%;\n    box-shadow: 0 0 10px #ccc;\n    border-collapse: collapse;\n    white-space: nowrap;\n    font-size: 1.000rem;\n    color: #757575;\n}\n\n.tbDatasource-table td {\n    position: relative;\n    border-top: 1px solid rgba(0, 0, 0, 0.12);\n    border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n    padding: 0px 18px;\n    box-sizing: border-box;\n}",
        "controllerScript": "self.onInit = function() {\n    \n    self.ctx.datasourceTitleCells = [];\n    self.ctx.valueCells = [];\n    self.ctx.labelCells = [];\n    \n    for (var i=0; i < self.ctx.datasources.length; i++) {\n        var tbDatasource = self.ctx.datasources[i];\n\n        var datasourceId = 'tbDatasource' + i;\n        self.ctx.$container.append(\n            \"<div id='\" + datasourceId +\n            \"' class='tbDatasource-container'></div>\"\n        );\n\n        var datasourceContainer = $('#' + datasourceId,\n            self.ctx.$container);\n\n        datasourceContainer.append(\n            \"<div class='tbDatasource-title'>\" +\n            tbDatasource.name + \"</div>\"\n        );\n        \n        var datasourceTitleCell = $('.tbDatasource-title', datasourceContainer);\n        self.ctx.datasourceTitleCells.push(datasourceTitleCell);\n        \n        var tableId = 'table' + i;\n        datasourceContainer.append(\n            \"<table id='\" + tableId +\n            \"' class='tbDatasource-table'><col width='30%'><col width='70%'></table>\"\n        );\n        var table = $('#' + tableId, self.ctx.$container);\n\n        for (var a = 0; a < tbDatasource.dataKeys.length; a++) {\n            var dataKey = tbDatasource.dataKeys[a];\n            var labelCellId = 'labelCell' + a;\n            var cellId = 'cell' + a;\n            table.append(\"<tr><td id='\" + labelCellId + \"'>\" + dataKey.label +\n                \"</td><td id='\" + cellId +\n                \"'></td></tr>\");\n            var labelCell = $('#' + labelCellId, table);\n            self.ctx.labelCells.push(labelCell);\n            var valueCell = $('#' + cellId, table);\n            self.ctx.valueCells.push(valueCell);\n        }\n    }    \n    \n    self.onResize();\n}\n\nself.onDataUpdated = function() {\n    for (var i = 0; i < self.ctx.valueCells.length; i++) {\n        var cellData = self.ctx.data[i];\n        if (cellData && cellData.data && cellData.data.length > 0) {\n            var tvPair = cellData.data[cellData.data.length -\n                1];\n            var value = tvPair[1];\n            var textValue;\n            //toDo -> + IsNumber\n            \n            if (isNumber(value)) {\n                var decimals = self.ctx.decimals;\n                var units = self.ctx.units;\n                if (cellData.dataKey.decimals || cellData.dataKey.decimals === 0) {\n                    decimals = cellData.dataKey.decimals;\n                }\n                if (cellData.dataKey.units) {\n                    units = cellData.dataKey.units;\n                }\n                txtValue = self.ctx.utils.formatValue(value, decimals, units, true);\n            } else {\n                txtValue = value;\n            }\n            self.ctx.valueCells[i].html(txtValue);\n        }\n    }\n    \n    function isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n}\n\nself.onResize = function() {\n    var datasourceTitleFontSize = self.ctx.height/8;\n    if (self.ctx.width/self.ctx.height <= 1.5) {\n        datasourceTitleFontSize = self.ctx.width/12;\n    }\n    datasourceTitleFontSize = Math.min(datasourceTitleFontSize, 20);\n    for (var i = 0; i < self.ctx.datasourceTitleCells.length; i++) {\n        self.ctx.datasourceTitleCells[i].css('font-size', datasourceTitleFontSize+'px');\n    }\n    var valueFontSize = self.ctx.height/9;\n    var labelFontSize = self.ctx.height/9;\n    if (self.ctx.width/self.ctx.height <= 1.5) {\n        valueFontSize = self.ctx.width/15;\n        labelFontSize = self.ctx.width/15;\n    }\n    valueFontSize = Math.min(valueFontSize, 18);\n    labelFontSize = Math.min(labelFontSize, 18);\n\n    for (i = 0; i < self.ctx.valueCells; i++) {\n        self.ctx.valueCells[i].css('font-size', valueFontSize+'px');\n        self.ctx.valueCells[i].css('height', valueFontSize*2.5+'px');\n        self.ctx.valueCells[i].css('padding', '0px ' + valueFontSize + 'px');\n        self.ctx.labelCells[i].css('font-size', labelFontSize+'px');\n        self.ctx.labelCells[i].css('height', labelFontSize*2.5+'px');\n        self.ctx.labelCells[i].css('padding', '0px ' + labelFontSize + 'px');\n    }    \n}\n\nself.onDestroy = function() {\n}\n",
        "settingsSchema": "{}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"My Device\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Temperature\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Happiness\",\"color\":\"#ff9800\",\"settings\":{},\"_hash\":0.18238112626812453,\"funcBody\":\"return Math.round(1000*Math.cos(time/5000));\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Device Information\",\"showTitleIcon\":false,\"iconColor\":\"rgba(0, 0, 0, 0.87)\",\"iconSize\":\"24px\",\"titleTooltip\":\"\",\"dropShadow\":true,\"enableFullscreen\":true,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"showLegend\":false}"
      }
    },
    {
      "alias": "basic_timeseries",
      "name": "Dynamic Telemetry",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "timeseries",
        "sizeX": 8,
        "sizeY": 5,
        "resources": [],
        "templateHtml": "",
        "templateCss": ".legend {\n    font-size: 13px;\n    line-height: 10px;\n}\n\n.legend table { \n    border-spacing: 0px;\n    border-collapse: separate;\n}\n\n.mouse-events .flot-overlay {\n    cursor: crosshair; \n}\n\n",
        "controllerScript": "// This is a customized version of the built in Time Series Flot\n// It will broadcast a deviceActive event when new data comes in\n\nself.onInit = function() {\n    const scope = self.ctx.$scope;\n    self.ctx.flot = new TbFlot(self.ctx);\n    scope.deviceActive = new Event(\"deviceActive\");\n    scope.dataSigs = [];\n};\n\nself.onDataUpdated = function() {\n    const scope = self.ctx.$scope;\n    \n    // Update the charts\n    self.ctx.flot.update();\n\n    // Function to recapture the data signature\n    const captureSigs = sources => {\n        scope.dataSigs = [];\n        const dataSigs = [];\n        for (const s of sources) {\n            if (s.data.length === 0) return;\n            dataSig = {\n                length: s.data.length,\n                head: s.data[0],\n                tail: s.data[s.data.length - 1]\n            };\n            dataSigs.push(dataSig);\n        }\n        scope.dataSigs = dataSigs;\n    };\n\n    // Check the current data against the data signature\n    sources = self.ctx.defaultSubscription.data;\n    if (scope.dataSigs.length === 0) {\n        captureSigs(sources);\n    } else {\n        changed = false;\n        for (let i = 0; i < scope.dataSigs.length; ++\n            i) {\n            sig = scope.dataSigs[i];\n            data = sources[i].data;\n            if (data.length != sig.length ||\n                data[0][0] != sig.head[0] ||\n                data[data.length - 1][0] != sig.tail[0]\n            ) {\n                changed = true;\n                break;\n            }\n        }\n        if (changed) {\n            scope.dataSigs = [];\n            captureSigs(sources);\n            document.dispatchEvent(scope.deviceActive);\n        }\n    }\n};\n\nself.onResize = function() {\n    self.ctx.flot.resize();\n};\n\nself.onEditModeChanged = function() {\n    self.ctx.flot.checkMouseEvents();\n};\n\nself.onMobileModeChanged = function() {\n    self.ctx.flot.checkMouseEvents();\n};\n\nself.getSettingsSchema = function() {\n    return TbFlot.settingsSchema('graph');\n};\n\nself.getDataKeySettingsSchema = function() {\n    return TbFlot.datakeySettingsSchema(true);\n};\n\nself.onDestroy = function() {\n    self.ctx.flot.destroy();\n};\n",
        "settingsSchema": "{}",
        "dataKeySettingsSchema": "{}",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"device_happiness\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Device Happiness\",\"color\":\"#2196f3\",\"settings\":{\"showLines\":true,\"fillLines\":true,\"showPoints\":false,\"axisPosition\":\"left\"},\"_hash\":0.8587686344902596,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"shadowSize\":4,\"fontColor\":\"#545454\",\"fontSize\":10,\"xaxis\":{\"showLabels\":true,\"color\":\"#545454\"},\"yaxis\":{\"showLabels\":true,\"color\":\"#545454\"},\"grid\":{\"color\":\"#545454\",\"tickColor\":\"#DDDDDD\",\"verticalLines\":true,\"horizontalLines\":true,\"outlineWidth\":1},\"stack\":false,\"tooltipIndividual\":false},\"title\":\"Dynamic Telemetry\",\"dropShadow\":true,\"enableFullscreen\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"mobileHeight\":null,\"widgetStyle\":{},\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"showLegend\":true,\"actions\":{}}"
      }
    },
    {
      "alias": "timeseries_table",
      "name": "Event Log",
      "image": "data:image/png;base64,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",
      "description": "Displays time series data for one or more entities. Data for each entity is displayed in a separate tab.",
      "descriptor": {
        "type": "timeseries",
        "sizeX": 8,
        "sizeY": 6.5,
        "resources": [],
        "templateHtml": "<tb-timeseries-table-widget \n    [ctx]=\"ctx\">\n</tb-timeseries-table-widget>",
        "templateCss": "",
        "controllerScript": "self.onInit = function() {\n}\n\nself.onDataUpdated = function() {\n     self.ctx.$scope.timeseriesTableWidget.onDataUpdated();\n}\n\nself.typeParameters = function() {\n    return {\n        ignoreDataUpdateOnIntervalTick: true\n    };\n}\n\nself.actionSources = function() {\n    return {\n        'actionCellButton': {\n            name: 'widget-action.action-cell-button',\n            multiple: true\n        },\n        'rowClick': {\n            name: 'widget-action.row-click',\n            multiple: false\n        }\n    };\n}\n\nself.onDestroy = function() {\n}",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"TimeseriesTableSettings\",\n        \"properties\": {\n            \"enableSearch\": {\n                \"title\": \"Enable search\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableStickyHeader\": {\n                \"title\": \"Always display header\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableStickyAction\": {\n                \"title\": \"Always display actions column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"showTimestamp\": {\n                \"title\": \"Display timestamp column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"showMilliseconds\": {\n                \"title\": \"Display timestamp milliseconds\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"displayPagination\": {\n                \"title\": \"Display pagination\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },     \n            \"useEntityLabel\": {\n                \"title\": \"Use entity label in tab name\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"defaultPageSize\": {\n                \"title\": \"Default page size\",\n                \"type\": \"number\",\n                \"default\": 10\n            },\n            \"hideEmptyLines\": {\n                \"title\": \"Hide empty lines\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"disableStickyHeader\": {\n                \"title\": \"Disable sticky header\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"useRowStyleFunction\": {\n                \"title\": \"Use row style function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"rowStyleFunction\": {\n                \"title\": \"Row style function: f(rowData, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"enableSearch\",\n        \"enableStickyHeader\",\n        \"enableStickyAction\",\n        \"showTimestamp\",\n        \"showMilliseconds\",\n        \"displayPagination\",\n        \"useEntityLabel\",\n        \"defaultPageSize\",\n        \"identifyDeviceSelector\",\n        \"hideEmptyLines\",\n        \"useRowStyleFunction\",\n        {\n            \"key\": \"rowStyleFunction\",\n            \"type\": \"javascript\",\n            \"condition\": \"model.useRowStyleFunction === true\"\n        }\n    ]\n}",
        "dataKeySettingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"DataKeySettings\",\n        \"properties\": {\n            \"useCellStyleFunction\": {\n                \"title\": \"Use cell style function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellStyleFunction\": {\n                \"title\": \"Cell style function: f(value, rowData, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"useCellContentFunction\": {\n                \"title\": \"Use cell content function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellContentFunction\": {\n                \"title\": \"Cell content function: f(value, rowData, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"useCellStyleFunction\",\n        {\n            \"key\": \"cellStyleFunction\",\n            \"type\": \"javascript\",\n            \"condition\": \"model.useCellStyleFunction === true\"\n        },\n        \"useCellContentFunction\",\n        {\n            \"key\": \"cellContentFunction\",\n            \"type\": \"javascript\",\n            \"condition\": \"model.useCellContentFunction === true\"\n        }\n    ]\n}",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"Message\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sample Events\",\"color\":\"#2196f3\",\"settings\":{\"useCellStyleFunction\":false,\"cellStyleFunction\":\"\",\"useCellContentFunction\":false,\"cellContentFunction\":\"\"},\"_hash\":0.9465983343407682,\"funcBody\":\"return `Event #${Math.round(1000*Math.sin(time/5000))}`;\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}]}],\"timewindow\":{\"hideInterval\":false,\"hideAggregation\":false,\"hideAggInterval\":false,\"hideTimezone\":false,\"selectedTab\":0,\"realtime\":{\"realtimeType\":0,\"timewindowMs\":2592000000,\"quickInterval\":\"CURRENT_DAY\",\"interval\":1000},\"aggregation\":{\"type\":\"NONE\",\"limit\":200}},\"showTitle\":true,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"showTimestamp\":true,\"displayPagination\":true,\"defaultPageSize\":10,\"enableSearch\":true,\"enableStickyHeader\":true,\"enableStickyAction\":true},\"title\":\"Event Log\",\"dropShadow\":true,\"enableFullscreen\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400,\"padding\":\"5px 10px 5px 10px\"},\"useDashboardTimewindow\":false,\"showLegend\":false,\"widgetStyle\":{},\"actions\":{},\"showTitleIcon\":false,\"iconColor\":\"rgba(0, 0, 0, 0.87)\",\"iconSize\":\"24px\",\"displayTimewindow\":true,\"titleTooltip\":\"\"}"
      }
    },
    {
      "alias": "tb_ota_form1_show_hide",
      "name": "OTA Form",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "rpc",
        "sizeX": 4.5,
        "sizeY": 2,
        "resources": [],
        "templateHtml": "<!--\r\nThe OTA Form widget HTML\r\n\r\n@copyright: Copyright 2019-2023 Intel Corporation All Rights Reserved.\r\n@license: Intel, see licenses/LICENSE for more details.\r\n-->\r\n\r\n<!--OTA Card-->\r\n<fieldset id=\"ota-panel\" style=\"height: 100%;\">\r\n    <div id=\"ota-method-button-wrapper\">\r\n        <mat-dialog-actions>\r\n            <button mat-button id=\"ota-method-button\"\r\n                (click)=\"displayDialog()\"\r\n                [class.mat-raised-button]=\"styleButton?.isRaised\"\r\n                [color]=\"styleButton?.isPrimary ? 'primary' : ''\"\r\n                [ngStyle]=\"customStyle\">\r\n                {{otaMethodLabel}}\r\n            </button>\r\n        </mat-dialog-actions>\r\n    </div>\r\n</fieldset>\r\n\r\n\r\n",
        "templateCss": "/*\r\nThe OTA Form widget CSS\r\n\r\n@copyright: Copyright 2019-2023 Intel Corporation All Rights Reserved.\r\n@license: Intel, see licenses/LICENSE for more details.\r\n*/\r\n\r\n#ota-method-button-wrapper {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n#ota-method-button {\r\n    background-color: rgb(33, 150, 243);\r\n    width: 100%;\r\n}\r\n\r\n",
        "controllerScript": "/*\r\nOTA Form widget Angular controller code\r\n\r\n@copyright: Copyright 2019-2023 Intel Corporation All Rights Reserved.\r\n@license: Intel, see licenses/LICENSE for more details.\r\n*/\r\n\r\nself.onInit = function() {\r\n    \r\n    const scope = self.ctx.$scope;\r\n    const settings = self.ctx.settings;\r\n     // Set the method\r\n    scope.otaMethodLabel = settings.otaMethodLabel;\r\n    scope.otaMethod = settings.otaMethod;\r\n    \r\n    \r\n    let $injector = self.ctx.$scope.$injector;\r\n    let customDialog = $injector.get(self.ctx.servicesMap.get('customDialog'));\r\n    let htmltemplate = `<!-- The OTA Form widget HTML  @copyright: Copyright 2021 Intel Corporation All Rights Reserved. @license: Intel, see licenses/LICENSE for more details. -->\r\n<div>\r\n    <div class=\"mat-dialog-container\"\r\n        id=\"ota-dialog-{{otaMethod}}\">\r\n        <style>\r\n            #ota-dialog-label-wrapper {\r\n                display: flex;\r\n                width: 100%;\r\n                align-items: center;\r\n                justify-content: space-between;\r\n            }\r\n\r\n            #ota-dialog-label {\r\n                font-size: 1rem;\r\n            }\r\n\r\n            .mat-dialog-content {\r\n                min-width: 20rem;\r\n            }\r\n\r\n            mat-tabs-wrapper {\r\n                position: -webkit-sticky;\r\n                position: sticky;\r\n                top: 0;\r\n            }\r\n\r\n            #ota-inputs {\r\n                margin-bottom: 2rem;\r\n                display: flex;\r\n                flex-flow: column;\r\n                align-items: stretch;\r\n            }\r\n\r\n            #ota-select-wrapper {\r\n                margin: 0.75rem 0;\r\n            }\r\n\r\n            #ota-text-wrapper {\r\n                margin: 0.75rem 0;\r\n            }\r\n\r\n            .mat-errors-spacer {\r\n                display: none;\r\n            }\r\n\r\n            #ota-button-wrapper {\r\n                display: flex;\r\n            }\r\n\r\n            #ota-button {\r\n                margin: 0;\r\n                background-color: rgb(33, 150, 243);\r\n            }\r\n\r\n            #ota-batch-toolbar {\r\n                display: flex;\r\n                width: 100%;\r\n                margin-bottom: 1rem;\r\n                align-items: center;\r\n                justify-content: space-between;\r\n            }\r\n\r\n            .ota-icon {\r\n                display: inline-flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                font-size: 1rem;\r\n            }\r\n\r\n            .success-icon {\r\n                color: green;\r\n            }\r\n\r\n            .failure-icon {\r\n                color: red;\r\n            }\r\n\r\n            .download-icon {\r\n                display: flex;\r\n            }\r\n\r\n            .inline {\r\n                display: inline-block;\r\n            }\r\n\r\n            .ota-response {\r\n                margin: 1rem 0;\r\n            }\r\n\r\n            .ota-message {\r\n                color: #aaa;\r\n                font-family: monospace;\r\n                font-size: 1rem;\r\n            }\r\n        </style>\r\n        <form name=\"otaForm\">\r\n            <mat-toolbar color=\"primary\">\r\n                <div class=\"mat-toolbar-tools\">\r\n                    <div id=\"ota-dialog-label-wrapper\">\r\n                        <div id=\"ota-dialog-label\">\r\n                            {{otaMethodLabel}} </div>\r\n                        <button mat-button\r\n                            class=\"mat-icon-button\"\r\n                            (click)=\"closeDialog()\"> &times;\r\n                        </button>\r\n                    </div>\r\n                    <mat-progress-linear id=\"rpc-progress\"\r\n                        class=\"md-warn\"\r\n                        style=\"position: absolute; bottom: 0; left: 0;\"\r\n                        *ngIf=\"executingRpcRequest\"\r\n                        mat-mode=\"indeterminate\">\r\n                    </mat-progress-linear>\r\n                </div>\r\n            </mat-toolbar>\r\n            <mat-content class=\"mat-padding\"\r\n                layout=\"column\">\r\n                <mat-tab-group class=\"mat-secondary\"\r\n                    layout=\"column\"\r\n                    [(selectedIndex)]=\"otaTab\"\r\n                    mat-dynamic-height mat-no-pagination\r\n                    mat-border-bottom>\r\n                    <mat-tab id=\"method-tab\" label=\"Method\">\r\n                        <mat-tab-body>\r\n                            <div class=\"mat-content\">\r\n                                <!--OTA Inputs-->\r\n                                <div id=\"ota-inputs\"\r\n                                    *ngIf=\"otaSelectFields.length || otaTextFields.length\">\r\n                                    <mat-form-field\r\n                                        class=\"ota-select-wrapper\"\r\n                                        *ngFor=\"let field of otaSelectFields; let i= index\"\r\n                                        [value]=\"field\">\r\n                                        <mat-label>\r\n                                            {{field.label}}\r\n                                        </mat-label>\r\n                                        <mat-select\r\n                                            [(ngModel)]=\"field.data\"\r\n                                            ngInit=\"field.data = field.options[0]\">\r\n                                            <mat-option\r\n                                                *ngFor=\"let o of field.options\"\r\n                                                [value]=\"o\">\r\n                                                {{ o.label }}\r\n                                            </mat-option>\r\n                                        </mat-select>\r\n                                    </mat-form-field>\r\n                                    <mat-form-field\r\n                                        class=\"ota-text-wrapper\"\r\n                                        *ngFor=\"let field of otaTextFields; let i = index\"\r\n                                        [value]=\"field\">\r\n                                            <mat-label>\r\n                                                {{field.label}}\r\n                                            </mat-label>\r\n                                            <input matInput\r\n                                                placeholder=\"Enter Text\"\r\n                                                [(ngModel)]=\"field.data\">\r\n                                    </mat-form-field>\r\n                                </div>\r\n                                <div id=\"ota-button-wrapper\"\r\n                                    [ngStyle]=\"{justifyContent: alignButton}\">\r\n                                    <button mat-button\r\n                                        id=\"ota-button\"\r\n                                        (click)=\"send()\"\r\n                                        [class.mat-raised-button]=\"styleButton?.isRaised\"\r\n                                        [color]=\"styleButton?.isPrimary ? 'primary' : ''\">\r\n                                        SEND </button>\r\n                                </div>\r\n                            </div>\r\n                        </mat-tab-body>\r\n                    </mat-tab>\r\n                    <mat-tab id=\"result-tab\" label=\"Results\">\r\n                        <mat-tab-body>\r\n                            <div class=\"mat-dialog-content\">\r\n                                <!--Method Result Display-->\r\n                                <span id=\"ota-batch-toolbar\"\r\n                                    *ngIf=\"batch\"> \r\n                                    <span\r\n                                        *ngIf=\"otaSuccess\"\r\n                                        class=\"inline\">\r\n                                        <span\r\n                                            class=\"inline\">{{otaSuccess}}</span>\r\n                                        <mat-icon\r\n                                            mat-font-library=\"material-icons\"\r\n                                            class=\"ota-icon success-icon\">\r\n                                            check_circle\r\n                                        </mat-icon>\r\n                                    </span>\r\n                                    <span\r\n                                        *ngIf=\"otaFailure\"\r\n                                        class=\"inline\">\r\n                                        <span\r\n                                            class=\"inline\">{{otaFailure}}</span>\r\n                                        <mat-icon\r\n                                            mat-font-library=\"material-icons\"\r\n                                            class=\"ota-icon failure-icon\">\r\n                                            cancel\r\n                                        </mat-icon>\r\n                                    </span>\r\n                                    <button mat-button\r\n                                        class=\"mat-icon-button\"\r\n                                        (click)=\"save()\">\r\n                                        <mat-icon\r\n                                            mat-font-library=\"material-icons\">\r\n                                            get_app\r\n                                        </mat-icon>\r\n                                    </button> \r\n                                </span>\r\n                                \r\n                                <div class=\"ota-response\"\r\n                                    *ngFor=\"let response of otaResponse\"\r\n                                    [value]=\"response\">\r\n                                    <div>\r\n                                        <mat-icon\r\n                                            mat-font-library=\"material-icons\"\r\n                                            class=\"ota-icon\"\r\n                                            [ngClass]=\"{'success-icon': response.success,  'failure-icon': !response.success}\">\r\n                                            {{response.success ? 'check_circle' : 'cancel'}}\r\n                                        </mat-icon> <span\r\n                                            class=\"inline\">{{response.name}}</span>\r\n                                    </div>\r\n                                    <div\r\n                                        class=\"ota-message\">\r\n                                        {{response.message}}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </mat-tab-body>\r\n                    </mat-tab>\r\n                </mat-tab-group>\r\n            </mat-content>\r\n        </form>\r\n    </div>\r\n</div>`\r\n\r\n    scope.devices = [];\r\n    // Callback to show the prerendered dialog\r\n    scope.displayDialog = event => {\r\n        scope.ctx.dialog = customDialog.customDialog(htmltemplate, DialogController);\r\n        scope.ctx.dialog.subscribe();\r\n        \r\n        function DialogController(instance) {\r\n            let vm = instance;\r\n            \r\n            vm.closeDialog = () => {\r\n                vm.dialogRef.close(null);\r\n                vm.initOtaResponse();\r\n            };\r\n\r\n            // Set the method\r\n            vm.otaMethodLabel = settings.otaMethodLabel;\r\n            vm.otaMethod = settings.otaMethod;\r\n\r\n            vm.batch = settings.batch ? true : false;\r\n\r\n            // Set the method select fields\r\n            vm.otaSelectFields = [];\r\n            if (settings.otaSelectFields) {\r\n                settings.otaSelectFields.forEach(field => {\r\n                    vm.otaSelectFields.push(field);\r\n                });\r\n            }\r\n            \r\n             // Set the method text fields\r\n            vm.otaTextFields = [];\r\n            if (settings.otaTextFields) {\r\n                settings.otaTextFields.forEach(field => {\r\n                vm.otaTextFields.push(field);\r\n                });\r\n            }\r\n            \r\n            // Center button if no fields are present\r\n            vm.alignButton =\r\n                (vm.otaSelectFields.length || vm.otaTextFields.length)\r\n                ? \"flex-end\" : \"center\";\r\n\r\n            // The device response data\r\n            vm.initOtaResponse = () => {\r\n                vm.otaTab = 0;\r\n                vm.otaSuccess = 0;\r\n                vm.otaFailure = 0;\r\n                vm.otaResponse = [];\r\n            };\r\n            vm.initOtaResponse();\r\n            \r\n            vm.addOtaResponse = (success, name, message) => {\r\n                response = {\r\n                    'success': success,\r\n                    'name': name,\r\n                    'message': message\r\n                };\r\n                (success) ? ++vm.otaSuccess : ++vm.otaFailure;\r\n                vm.otaResponse.push(response);\r\n            };\r\n            \r\n            // Callback for send button\r\n            vm.send = () => {\r\n                vm.initOtaResponse();\r\n                if (vm.batch) {\r\n                    vm.sendFieldsBatch();\r\n                } else {\r\n                    vm.sendFields();\r\n                }\r\n            };\r\n            \r\n             // Simulate a batch RPC\r\n            vm.sendFieldsBatch = () => {\r\n                self.ctx.detectChanges();\r\n                console.log(scope.devices);\r\n                scope.devices.forEach(device => {\r\n                    console.log('-processing a device-');\r\n                    self.ctx.detectChanges();\r\n                    self.ctx.defaultSubscription.targetDeviceId = device.id;\r\n                    self.ctx.defaultSubscription.targetDeviceName = device.name;\r\n                    vm.sendFields();\r\n                });\r\n            };\r\n            \r\n            // Send the fields and inputs to device\r\n            vm.sendFields = () => {\r\n                // Populate the method arguments\r\n                const args = {};\r\n        \r\n                vm.otaTextFields.forEach(field => {\r\n                    if (field.data) args[field.key] = field.data;\r\n                });\r\n        \r\n                vm.otaSelectFields.forEach(field => {\r\n                    if (field.data) args[field.key] = field.data.key;\r\n                });\r\n                // Send the arguments\r\n                const timeout = settings.requestTimeout;\r\n                const name = self.ctx.defaultSubscription.targetDeviceName;\r\n        \r\n                var commandObservable = self.ctx.controlApi.sendTwoWayCommand(scope.otaMethod, args, timeout);\r\n                vm.afterOtaResponse = () => {\r\n                \r\n                    const totalOta = vm.otaSuccess + vm.otaFailure;\r\n                    \r\n                    if (totalOta >= scope.devices.length) { // Include non-batch case\r\n                        vm.otaResponse.sort((a, b) => {\r\n                        if (a.success && !b.success) {\r\n                            return -1;\r\n                        } else if (!a.success && b.success) {\r\n                            return 1;\r\n                        } else if (a.name < b.name) {\r\n                            return -1;\r\n                        } else if (a.name > b.name) {\r\n                            return 1;\r\n                        }\r\n                            return 0;\r\n                        });\r\n                        vm.otaTab = 1;\r\n                    }\r\n                }\r\n                commandObservable.subscribe(\r\n                    function (response) {\r\n                        vm.addOtaResponse(\r\n                            true, name, response);\r\n                        vm.afterOtaResponse();\r\n                        self.ctx.detectChanges();\r\n                    },\r\n                    function (rejection) {\r\n                        self.ctx.detectChanges();\r\n                        if (rejection.status == 504) {\r\n                            vm.addOtaResponse(\r\n                                false, name, \"Device did not respond before timeout.\");\r\n                        } else {\r\n                            vm.addOtaResponse(\r\n                                false, name, `\"${rejection.status}`\r\n                                + ` ${rejection.statusText} `\r\n                                + `${vm.rpcErrorText}\"`);\r\n                        }\r\n                        vm.afterOtaResponse();\r\n                        self.ctx.detectChanges();\r\n                    }\r\n                );\r\n            };\r\n        }\r\n    };\r\n    \r\n    //Listen to the globally broadcasted device selection event\r\n    document.addEventListener(\"deviceSelected\", e => {\r\n        console.log(\"Updating devices with \" + e.detail);\r\n        scope.devices = e.detail;\r\n    }); \r\n    \r\n    // Run any resizing code\r\n    self.onResize();\r\n};\r\n\r\nself.onResize = function() {};\r\n\r\nself.onDestroy = function() {\r\n    document.removeEventListener(\"deviceActive\", self.ctx.$scope.updateList);\r\n};",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"oneWayElseTwoWay\": {\n                \"title\": \"Is One Way Command\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"batch\": {\n                \"title\": \"Batch RPC\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"otaMethodLabel\": {\n                \"title\": \"OTA Method Label\",\n                \"type\": \"string\",\n                \"default\": \"Sample Method\"\n            },\n            \"otaMethod\": {\n                \"title\": \"OTA Method Key\",\n                \"type\": \"string\",\n                \"default\": \"sample_method\"\n            },\n            \"otaSelectFields\": {\n                \"title\": \"Select Box Fields\",\n                \"type\": \"array\",\n                \"minItems\": 0,\n                \"items\": {\n                    \"title\": \"Select Box\",\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"label\": {\n                            \"title\": \"Label\",\n                            \"type\": \"string\"\n                        },\n                        \"key\": {\n                            \"title\": \"Key\",\n                            \"type\": \"string\"\n                        },\n                        \"options\": {\n                            \"title\": \"Options\",\n                            \"type\": \"array\",\n                            \"minItems\": 1,\n                            \"items\": {\n                                \"title\": \"Option\",\n                                \"type\": \"object\",\n                                \"properties\": {\n                                    \"label\": {\n                                        \"title\": \"Label\",\n                                        \"type\": \"string\"\n                                    },\n                                    \"key\": {\n                                        \"title\": \"Key\",\n                                        \"type\": \"string\"\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n            \"otaTextFields\": {\n                \"title\": \"Text Box Fields\",\n                \"type\": \"array\",\n                \"minItems\": 0,\n                \"items\": {\n                    \"title\": \"Text Box\",\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"label\": {\n                            \"title\": \"Label\",\n                            \"type\": \"string\"\n                        },\n                        \"key\": {\n                            \"title\": \"Key\",\n                            \"type\": \"string\"\n                        }\n                    }\n                }\n            },\n            \"requestTimeout\": {\n                \"title\": \"RPC request timeout\",\n                \"type\": \"number\",\n                \"default\": 500\n            }\n        }\n    },\n    \"form\": [\n        \"batch\",\n        \"otaMethodLabel\",\n        \"otaMethod\",\n        \"otaTextFields\",\n        \"otaSelectFields\",\n        \"oneWayElseTwoWay\",\n        \"requestTimeout\"\n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"targetDeviceAliases\":[],\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{\"requestTimeout\":500,\"otaTextFields\":[{\"label\":\"Sample Text\",\"key\":\"sample_text\"},{\"label\":\"Sample Text 2\",\"key\":\"sample_text_2\"}],\"otaSelectFields\":[{\"label\":\"Sample Select\",\"key\":\"sample_select\",\"options\":[{\"label\":\"Option 1\",\"key\":\"1\"},{\"label\":\"Option 2\",\"key\":\"2\"},{\"label\":\"Option 3\",\"key\":\"3\"}],\"data\":{\"label\":\"Option 1\",\"key\":\"1\"}},{\"label\":\"Sample Select 2\",\"key\":\"sample_select_2\",\"options\":[{\"label\":\"Option 1\",\"key\":\"1\"},{\"label\":\"Option 2\",\"key\":\"2\"},{\"label\":\"Option 3\",\"key\":\"3\"}],\"data\":{\"label\":\"Option 1\",\"key\":\"1\"}}],\"otaMethod\":\"sample_form_method\",\"otaMethodLabel\":\"Sample Form Method\"},\"title\":\"OTA Form\",\"dropShadow\":true,\"enableFullscreen\":false,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"useDashboardTimewindow\":true,\"displayTimewindow\":true,\"showLegend\":false,\"actions\":{}}"
      }
    },
    {
      "alias": "kk",
      "name": "kk",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "latest",
        "sizeX": 4,
        "sizeY": 2,
        "resources": [],
        "templateHtml": "<fieldset class=\"gpio-panel\" style=\"height: 100%;\">\n    <section class=\"gpio-row\" fxLayout=\"row\" *ngFor=\"let row of rows\" \n            [ngStyle]=\"{'height': prefferedRowHeight+'px'}\">\n        <section fxFlex fxLayout=\"row\" *ngFor=\"let cell of row; let $index = index\">\n            <section fxLayout=\"row\" fxFlex *ngIf=\"cell\" fxLayoutAlign=\"{{$index===0 ? 'end center' : 'start center'}}\">\n                <span class=\"gpio-left-label\" [fxShow]=\"$index===0\">{{ cell.label }}</span>\n                <section fxLayout=\"row\" class=\"switch-panel\" fxLayoutAlign=\"start center\" [ngClass]=\"$index===0 ? 'col-0' : 'col-1'\"\n                      [ngStyle]=\"{'height': prefferedRowHeight+'px', 'backgroundColor':  switchPanelBackgroundColor }\">\n                    <span class=\"pin\" [fxShow]=\"$index===0\">{{cell.pin}}</span>\n                    <span fxFlex [fxShow]=\"$index===1\"></span>\n                    <mat-slide-toggle\n                        [disabled]=\"!rpcEnabled || executingRpcRequest\"\n                        [checked]=\"cell.enabled\" \n                        (change)=\"gpioToggleChange($event, cell)\" \n                        (click)=\"gpioClick($event, cell)\">\n                    </mat-slide-toggle>\n                    <span fxFlex [fxShow]=\"$index===0\"></span>\n                    <span class=\"pin\" [fxShow]=\"$index===1\">{{cell.pin}}</span>\n                </section>\n                <span class=\"gpio-right-label\" [fxShow]=\"$index===1\">{{ cell.label }}</span>\n            </section>\n            <section fxLayout=\"row\" fxFlex *ngIf=\"!cell\">\n                <span fxFlex [fxShow]=\"$index===0\"></span>\n                <span class=\"switch-panel\"\n                      [ngStyle]=\"{'height': prefferedRowHeight+'px', 'backgroundColor':  switchPanelBackgroundColor }\"></span>\n                <span fxFlex [fxShow]=\"$index===1\"></span>\n            </section>\n        </section>\n    </section>                            \n    <span class=\"error\" style=\"position: absolute; bottom: 5px;\" [fxShow]=\"rpcErrorText\">{{rpcErrorText}}</span>\n    <mat-progress-bar [fxShow]=\"executingRpcRequest\" style=\"position: absolute; bottom: 0;\" mode=\"indeterminate\"></mat-progress-bar>\n</fieldset>",
        "templateCss": ".error {\n    font-size: 14px !important;\n    color: maroon;/*rgb(250,250,250);*/\n    background-color: transparent;\n    padding: 6px;\n}\n\n.error span {\n    margin: auto;\n}\n\n.gpio-panel {\n    padding-top: 10px;\n    white-space: nowrap;\n}\n\n.gpio-panel section[fxflex] {\n    min-width: 0px;\n}\n\n\n.switch-panel {\n    margin: 0;\n    height: 32px;\n    width: 66px;\n    min-width: 66px;\n}\n\n.switch-panel mat-slide-toggle {\n    margin: 0;\n    width: 36px;\n    min-width: 36px;\n}\n\n.switch-panel.col-0 mat-slide-toggle {\n    margin-left: 8px;\n    margin-right: 4px;\n}\n\n.switch-panel.col-1 mat-slide-toggle {\n    margin-left: 4px;\n    margin-right: 8px;\n}\n\n.gpio-row {\n    height: 32px;\n}\n\n.pin {\n    margin-top: auto;\n    margin-bottom: auto;\n    color: white;\n    font-size: 12px;\n    width: 16px;\n    min-width: 16px;\n}\n\n.switch-panel.col-0 .pin {\n    margin-left: auto;\n    padding-left: 2px;\n    text-align: right;\n}\n\n.switch-panel.col-1 .pin {\n    margin-right: auto;\n    \n    text-align: left;\n}\n\n.gpio-left-label {\n    margin-right: 8px;\n}\n\n.gpio-right-label {\n    margin-left: 8px;\n}",
        "controllerScript": "var namespace;\nvar cssParser = new cssjs();\n\nself.onInit = function() {\n    var utils = self.ctx.$injector.get(self.ctx.servicesMap.get('utils'));\n    namespace = 'gpio-control-' + utils.guid();\n    cssParser.testMode = false;\n    cssParser.cssPreviewNamespace = namespace;\n    self.ctx.$container.addClass(namespace);\n    self.ctx.ngZone.run(function() {\n       init(); \n    });\n}\n\nfunction init() {\n        \n    var i, gpio;\n    var scope = self.ctx.$scope;\n    var settings = self.ctx.settings;\n    scope.gpioList = [];\n    for (var g = 0; g < settings.gpioList.length; g++) {\n        gpio = settings.gpioList[g];\n        scope.gpioList.push(\n            {\n                row: gpio.row,\n                col: gpio.col,\n                pin: gpio.pin,\n                label: gpio.label,\n                enabled: false\n            }\n        );\n    }\n\n    scope.requestTimeout = settings.requestTimeout || 1000;\n\n    scope.switchPanelBackgroundColor = settings.switchPanelBackgroundColor || tinycolor('green').lighten(2).toRgbString();\n\n    scope.gpioStatusRequest = {\n        method: \"getGpioStatus\",\n        paramsBody: \"{}\"\n    };\n    \n    if (settings.gpioStatusRequest) {\n        scope.gpioStatusRequest.method = settings.gpioStatusRequest.method || scope.gpioStatusRequest.method;\n        scope.gpioStatusRequest.paramsBody = settings.gpioStatusRequest.paramsBody || scope.gpioStatusRequest.paramsBody;\n    }\n    \n    scope.gpioStatusChangeRequest = {\n        method: \"setGpioStatus\",\n        paramsBody: \"{\\n   \\\"pin\\\": \\\"{$pin}\\\",\\n   \\\"enabled\\\": \\\"{$enabled}\\\"\\n}\"\n    };\n    \n    if (settings.gpioStatusChangeRequest) {\n        scope.gpioStatusChangeRequest.method = settings.gpioStatusChangeRequest.method || scope.gpioStatusChangeRequest.method;\n        scope.gpioStatusChangeRequest.paramsBody = settings.gpioStatusChangeRequest.paramsBody || scope.gpioStatusChangeRequest.paramsBody;\n    }\n    \n    scope.parseGpioStatusFunction = \"return body[pin] === true;\";\n    \n    if (settings.parseGpioStatusFunction && settings.parseGpioStatusFunction.length > 0) {\n        scope.parseGpioStatusFunction = settings.parseGpioStatusFunction;\n    }\n    \n    scope.parseGpioStatusFunction = new Function(\"body, pin\", scope.parseGpioStatusFunction);\n    \n    function requestGpioStatus() {\n        self.ctx.controlApi.sendTwoWayCommand(scope.gpioStatusRequest.method, \n                            scope.gpioStatusRequest.paramsBody, \n                            scope.requestTimeout)\n            .subscribe(\n                function success(responseBody) {\n                    for (var g = 0; g < scope.gpioList.length; g++) {\n                        var gpio = scope.gpioList[g];\n                        var enabled = scope.parseGpioStatusFunction.apply(this, [responseBody, gpio.pin]);\n                        gpio.enabled = enabled;   \n                        self.ctx.detectChanges();\n                    }\n                }\n            );\n    }\n    \n    function changeGpioStatus(gpio) {\n        var pin = gpio.pin + '';\n        var enabled = !gpio.enabled;\n        enabled = enabled === true ? 'true' : 'false';\n        var paramsBody = scope.gpioStatusChangeRequest.paramsBody;\n        var requestBody = JSON.parse(paramsBody.replace(\"\\\"{$pin}\\\"\", pin).replace(\"\\\"{$enabled}\\\"\", enabled));\n        self.ctx.controlApi.sendTwoWayCommand(scope.gpioStatusChangeRequest.method, \n                                    requestBody, scope.requestTimeout)\n                    .subscribe(\n                        function success(responseBody) {\n                            var enabled = scope.parseGpioStatusFunction.apply(this, [responseBody, gpio.pin]);\n                            gpio.enabled = enabled;\n                            self.ctx.detectChanges();\n                        }\n                    );\n    }\n    \n    scope.gpioCells = {};\n    var rowCount = 0;\n    for (i = 0; i < scope.gpioList.length; i++) {\n        gpio = scope.gpioList[i];\n        scope.gpioCells[gpio.row+'_'+gpio.col] = gpio;\n        rowCount = Math.max(rowCount, gpio.row+1);\n    }\n    \n    scope.prefferedRowHeight = 32;\n    scope.rows = [];\n    for (i = 0; i < rowCount; i++) {\n        var row = [];\n        for (var c =0; c<2;c++) {\n            if (scope.gpioCells[i+'_'+c]) {\n                row[c] = scope.gpioCells[i+'_'+c];\n            } else {\n                row[c] = null;\n            }\n        }\n        scope.rows.push(row);\n    }\n\n    scope.gpioClick = function($event, gpio) {\n        if (scope.rpcEnabled && !scope.executingRpcRequest) {\n            changeGpioStatus(gpio);\n        }\n    };\n    \n    scope.gpioToggleChange = function($event, gpio) {\n        gpio.enabled = !$event.checked;\n        $event.source.toggle();\n        self.ctx.detectChanges();\n    }\n    \n    if (scope.rpcEnabled) {\n        requestGpioStatus();   \n    }\n    \n    self.onResize();\n}\n\nself.onResize = function() {\n    var scope = self.ctx.$scope;\n    var rowCount = scope.rows.length;\n    var prefferedRowHeight = (self.ctx.height - 35)/rowCount;\n    prefferedRowHeight = Math.min(32, prefferedRowHeight);\n    prefferedRowHeight = Math.max(12, prefferedRowHeight);\n    scope.prefferedRowHeight = prefferedRowHeight;\n    var ratio = prefferedRowHeight/32;\n    \n    var css = '.mat-slide-toggle .mat-slide-toggle-bar {\\n' +\n        '   height: ' + 14*ratio+'px;\\n'+\n        '   width: ' + 36*ratio+'px;\\n'+\n    '}\\n';\n    css += '.mat-slide-toggle .mat-slide-toggle-thumb-container {\\n' +\n        '   height: ' + 20*ratio+'px;\\n'+\n        '   width: ' + 20*ratio+'px;\\n'+\n    '}\\n';\n    css += '.mat-slide-toggle .mat-slide-toggle-thumb {\\n' +\n        '   height: ' + 20*ratio+'px;\\n'+\n        '   width: ' + 20*ratio+'px;\\n'+\n    '}\\n';\n    css += '.mat-slide-toggle .mat-slide-toggle-ripple {\\n' +\n        '   height: ' + 40*ratio+'px;\\n'+\n        '   width: ' + 40*ratio+'px;\\n'+\n        '   top: calc(50% - '+20*ratio+'px);\\n'+\n        '   left: calc(50% - '+20*ratio+'px);\\n'+\n    '}\\n';\n    css += '.gpio-left-label, .gpio-right-label {\\n' +\n        '   font-size: ' + 16*ratio+'px;\\n'+\n    '}\\n';\n    var pinsFontSize = Math.max(9, 12*ratio);\n    css += '.pin {\\n' +\n        '   font-size: ' + pinsFontSize+'px;\\n'+\n    '}\\n';\n\n    cssParser.createStyleElement(namespace, css);\n    \n    self.ctx.detectChanges();\n}\n\nself.onDestroy = function() {\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"gpioList\": {\n                \"title\": \"Gpio switches\",\n                \"type\": \"array\",\n                \"minItems\" : 1,\n                \"items\": {\n                    \"title\": \"Gpio switch\",\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"pin\": {\n                            \"title\": \"Pin\",\n                            \"type\": \"number\"\n                        },\n                        \"label\": {\n                            \"title\": \"Label\",\n                            \"type\": \"string\"\n                        },\n                        \"row\": {\n                            \"title\": \"Row\",\n                            \"type\": \"number\"\n                        },\n                        \"col\": {\n                            \"title\": \"Column\",\n                            \"type\": \"number\"\n                        }\n                    },\n                    \"required\": [\"pin\", \"label\", \"row\", \"col\"]\n                }\n            },\n            \"requestTimeout\": {\n                \"title\": \"RPC request timeout\",\n                \"type\": \"number\",\n                \"default\": 500\n            },\n            \"switchPanelBackgroundColor\": {\n                \"title\": \"Switches panel background color\",\n                \"type\": \"string\",\n                \"default\": \"#008a00\"\n            },\n            \"gpioStatusRequest\": {\n                \"title\": \"GPIO status request\",\n                \"type\": \"object\",\n                 \"properties\": {\n                    \"method\": {\n                        \"title\": \"Method name\",\n                        \"type\": \"string\",\n                        \"default\": \"getGpioStatus\"\n                    },\n                    \"paramsBody\": {\n                      \"title\": \"Method body\",\n                      \"type\": \"string\",\n                      \"default\": \"{}\"\n                    }\n                },\n                \"required\": [\"method\", \"paramsBody\"]\n            },\n            \"gpioStatusChangeRequest\": {\n                \"title\": \"GPIO status change request\",\n                \"type\": \"object\",\n                 \"properties\": {\n                    \"method\": {\n                        \"title\": \"Method name\",\n                        \"type\": \"string\",\n                        \"default\": \"setGpioStatus\"\n                    },\n                    \"paramsBody\": {\n                      \"title\": \"Method body\",\n                      \"type\": \"string\",\n                      \"default\": \"{\\n   \\\"pin\\\": \\\"{$pin}\\\",\\n   \\\"enabled\\\": \\\"{$enabled}\\\"\\n}\"\n                    }\n                },\n                \"required\": [\"method\", \"paramsBody\"]\n            },\n            \"parseGpioStatusFunction\": {\n                \"title\": \"Parse gpio status function\",\n                \"type\": \"string\",\n                \"default\": \"return body[pin] === true;\"\n            } \n        },\n        \"required\": [\"gpioList\", \n                     \"requestTimeout\",\n                     \"switchPanelBackgroundColor\",\n                     \"gpioStatusRequest\",\n                     \"gpioStatusChangeRequest\",\n                     \"parseGpioStatusFunction\"]\n    },\n    \"form\": [\n        \"gpioList\",\n        \"requestTimeout\",\n        {\n            \"key\": \"switchPanelBackgroundColor\",\n            \"type\": \"color\"\n        },\n        {\n            \"key\": \"gpioStatusRequest\",\n            \"items\": [\n                \"gpioStatusRequest.method\",\n                {\n                    \"key\": \"gpioStatusRequest.paramsBody\",\n                    \"type\": \"json\"\n                }\n            ]\n        },\n        {\n            \"key\": \"gpioStatusChangeRequest\",\n            \"items\": [\n                \"gpioStatusChangeRequest.method\",\n                {\n                    \"key\": \"gpioStatusChangeRequest.paramsBody\",\n                    \"type\": \"json\"\n                }\n            ]\n        },\n        {\n            \"key\": \"parseGpioStatusFunction\",\n            \"type\": \"javascript\"\n        }\n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{\"parseGpioStatusFunction\":\"return body[pin] === true;\",\"gpioStatusChangeRequest\":{\"method\":\"setGpioStatus\",\"paramsBody\":\"{\\n   \\\"pin\\\": \\\"{$pin}\\\",\\n   \\\"enabled\\\": \\\"{$enabled}\\\"\\n}\"},\"requestTimeout\":500,\"switchPanelBackgroundColor\":\"#b71c1c\",\"gpioStatusRequest\":{\"method\":\"getGpioStatus\",\"paramsBody\":\"{}\"},\"gpioList\":[{\"pin\":1,\"label\":\"GPIO 1\",\"row\":0,\"col\":0,\"_uniqueKey\":0},{\"pin\":2,\"label\":\"GPIO 2\",\"row\":0,\"col\":1,\"_uniqueKey\":1},{\"pin\":3,\"label\":\"GPIO 3\",\"row\":1,\"col\":0,\"_uniqueKey\":2}]},\"title\":\"kk\",\"datasources\":[],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}}}"
      }
    }
  ]
}