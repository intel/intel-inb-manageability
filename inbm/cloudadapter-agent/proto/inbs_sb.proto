syntax = "proto3";

package inbs;

service INBSSBService {
  // Bi-directional streaming method
  rpc INBMCommand(stream INBMResponse) returns (stream INBMRequest);
}

message INBMRequest {
  string request_id = 1;
  oneof payload {
    PingRequest ping_request = 2;
    ScheduledUpdateRequest scheduled_update_request = 3;
  }
}

message INBMResponse {  
  string request_id = 1;
  oneof payload {
    PingResponse ping_response = 2;
    ScheduledUpdateResponse scheduled_update_response = 3;
  }
}

message PingRequest {
}

message PingResponse {
}

message ScheduledUpdateRequest {
  enum UpdateType {
    SOTA = 0; // Software Over The Air updates
  }
  UpdateType update_type = 1;
  oneof schedule {
    int64 epoch_time = 2; // Scheduled time in UNIX epoch seconds
    bool immediate = 3; // For immediate updates
  }
}

message ScheduledUpdateResponse {
}